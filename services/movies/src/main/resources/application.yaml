spring:
    application:
        name: movies-service
    jpa:
      hibernate:
        ddl-auto: validate # Flyway will handle schema migrations
    datasource:
      url: ${MOVIES_DB_URL}
      username: ${MOVIES_DB_USER}
      password: ${MOVIES_DB_PASSWORD}
      driver-class-name: org.postgresql.Driver
    flyway:
      enabled: true # Enable Flyway for database migrations
      url: ${MOVIES_DB_URL}
      user: ${MOVIES_DB_USER}
      password: ${MOVIES_DB_PASSWORD}
      locations: classpath:db/migration

management:
    endpoints:
        web:
            exposure:
                include: health,info
    endpoint:
        health:
            probes:
              enabled: true

server:
  port: ${MOVIES_SERVICE_PORT}

logging:
  level:
    root: INFO
    io.github.gbessonov: INFO

resilience4j:
  ratelimiter:
    configs:
      instances:
        registerHealthIndicator: true
      default:
        limit-for-period: 10
        limit-refresh-period: 1s
        timeout-duration: 0s
        register-health-indicator: true

jwt:
  key: ${JWT_KEY}
